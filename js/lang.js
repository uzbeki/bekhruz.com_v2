const language = {
    uz: {
        nav_projects: "Rezyume",
        nav_reversi: "Reversi",
        nav_covid19: "Covid-19",
        nav_action1: "Davlatlar bo'yicha",
        nav_action2: "Kasallar soni bo'yicha",
        nav_action3: "Statistika",
        nav_news: "Yangiliklar",
        nav_blogs: "Bloglar",
        nav_login: "Kirish",


        login_title: "Login va parolni kiriting",
        login_username: "Login",
        login_password: "Parol",
        login_remember_me: "Meni eslab qol",
        login_forgot_password: "Parolni unutdizmi?",
        login_sign_in: "Kirish",
        login_not_member: "Hali a'zo emasmisiz?",
        login_register: "Registratsiya qiling",
        login_or_sign_up: "yoki bular orqali a'zo bo'ling:",


        data_rotate: ["Dasturchi", "Sayohatchi", "Front-end dasturchi", "Back-end dasturchi", "Til o'rganuchi"],
        intro_p1: "Azim Buxoroning chekkalarida, ilm-fanga qund bilan qiziqib katta bo'lganman. Eski-tuski aparatlarni qanday ishlashini tushunish ilinjida, ichini ochib ko'rardim. Katta bo'lgan bo'lsam ham, shu odatimni hali ham tashlayolmadim.",
        intro_p2: "O'smirlik davrlarimda Ingliz tilini o'rganishni boshladim. Shu bilan dunyoga boshqacha ko'z bilan qaraydigan bo'ldim. Boshqa madaniyat, kulturalar haqida o'rgangan sayin, o'shalarni tezroq borib o'z ko'zlarim bilan ko'rish, boshimdan kechirish ishtiyoqi ortib borardi. Taqdirni qarang-ki, bir necha yil o'tib Yaponiyada ishlab yurimman.",
        intro_see_more: "ko'proq ko'rish",
        intro_see_less: "kamroq ko'rish",



        swiper_js: "Javascriptni ko'p proyektlarimda ishlataman. Siz to'g'ridan-to'g'ri ko'ra oladiganlariz: Covid-19 ma'lumotlari analizatori, Reversi o'yini va hozir qarab turgan sahifangizda ham ayrim funksiyalarni JSda tayyorlaganman. Github profilimda batafsil ko'ring.",
        swiper_html5: "Dasturlashni HTML5 bilan boshlaganman. HTML5 - HTMLni yangilangan versiyasi: yangi elementlari, xususiyatlari (attributes) bilan juda kuchli websaytlar va dasturlar yaratishga yo'l ochib beradi. Tekshirish oynasi (inspection window) orqali HTML5da qanday kodlashimni ko'rishingiz mumkin.",
        swiper_css: "CSSni bilmaganimda qanday qilib o'zimni dasturchi deb atay olaman? Butun webni shu chiroyga solib turibdi, axir. Oddiy CSSdan tashqari, Sass, Bootstrap va Tailwind CSSlarni ham proyektlarimda ishlataman. Shu sahifani dizayni CSSda qanday yaratilganiga qiziqyapsizmi? Ochib ko'ring.",
        swiper_django: "Django - to'liq steklik (full stack) dasturlashdagi ilk qadamim. Shaxsiy websaytim, ma'lumotlar bazasi va REST API kabilar aralashgan proyektlariming yuragida Django turibdi. Uning model arxitekturasi turfa bazalar bilan ishlashimni osonlashtiradi. Qolaversa, proyektlarimni Django bilan tezda kengaytira olaman.",
        swiper_python: "Python - hamma yoqda shov-shuvli til, va shu meni karyeramga yetaklagan til hisoblanadi. Yangiliklar to'plami, web o'rgimchagi (web scraper), foydalanuvchi autentifikatsiya sistemasi, shaxsiy ishlarimni automatlashtirishda Python ishlatganman.",
        swiper_aws: "Amazonni Web Servislari judayam ishimizni yengilashtiryapti. O'zim mijoz sifatida, proyektlarimni joylayman, databazasidan foydalanaman, fayllarimni saqlashda ishlataman. Biznesizni keyingi boshqichga olib chiqmoqchi bo'lsangiz, AWS - eng qulayi. Yordamga tayyorman.",
        swiper_c: "Dasturlash tillarini otasi deb aytishadi. Birinchi ishimda C bilan ishlaganman. Command-line o'yinlari, ikkilik (binary) fayl analizatori va back-end sistemalarini Cda tuzganman. Mobodo, o'rnatilgan tizimlarni yaratishga qiziqishiz bo'lib, yordam kerak bo'lsa, menga bildiring.",
        swiper_kotlin: "Android Studioda Kotlin bilan mobil aplikatsiyalar ham tuza olaman. Mobil dasturlashga hali yangi bo'lsam-da, istalgan murakkablikdagi dasturni yaratish - bir necha marta Googlega tashrif buyurish bilan bitadi. Kalkulyator, ta'limiy test dasturlari va musiqa pleyeri tuzganman.",

    },
    en: {
        nav_projects: "Resume",
        nav_reversi: "Reversi",
        nav_covid19: "Covid-19",
        nav_action1: "Action",
        nav_action2: "Action two",
        nav_action3: "Something else here",
        nav_news: "News",
        nav_blogs: "Blogs",
        nav_login: "Login",


        login_title: "Login with your credentials",
        login_username: "Username",
        login_password: "Password",
        login_remember_me: "Remember me",
        login_forgot_password: "Forgot password?",
        login_sign_in: "Sign in",
        login_not_member: "Not a member?",
        login_register: "Register",
        login_or_sign_up: "or sign up with:",


        data_rotate: ["Software Engineer", "Traveller", "Front-end developer", "Back-end developer", "Language learner"],
        intro_p1: "Growing up in the outskirts of Bukhara, I have spent my childhood years with full of curiosity towards science and nature. I used to take apart old electronics and pondered to make sense of how they would work.",
        intro_p2: "Then, in my teenage years, I started learning English and with that came a whole new perspective of the world. The more I learned about other cultures, the more I wanted to go out into the world and see it for myself. Here I am, after a few years, working abroad in Japan. The rest is history.",
        intro_see_more: "see more",
        intro_see_less: "see less",



        swiper_js: "I have been using JavaScript in most of my projects. The ones you can directly see are Covid-19 data analyzer, Reversi game and the page you are looking at has some JS involved. Check out the source codes in my Github profile.",
        swiper_html5: "HTML5 was my introduction to programming. It is a new version of the language HTML, with new elements, attributes, and behaviors that allows more diverse and powerful Websites and applications. Please refer to the inspection window to look at how I code in HTML.",
        swiper_css: "I would be no developer if I did not know CSS. It is what styles all of the web. Besides plain css, I also use preprocessors like Sass, CSS powered frameworks like Bootstrap and Tailwind CSS in my projects. Curious to find out how this page's design came to be?",
        swiper_django: "Django was my very first step towards full-stack development. It is at the core of my personal website and projects that involve databases and REST APIs. Django's model architecture makes it easier for me to work with different databases. Plus, I can scale anything up in no time with Django.",
        swiper_python: "Python - the language on the hype, yet it is what really pushed me into determining my career. I have created news aggregators, web-scrapers, user authentication systems, websites, automated my workflow with Python. Given the adequate time, I can do almost anything - any thing with Python.",
        swiper_aws: "Amazon's Web Services are really making a lot of our lives easier. I am a customer, myself, deploying my projects, using AWS databases, storing my files and so on to the cloud. If you are thinking of scaling your business to the next level, AWS is a way to go, and I am happy to help!",
        swiper_c: "C is the father of programming languages, some say. I first got to work with it in my first job. I created command line games, binary file analyzers and back-end systems with it. It is super fast. In case you're into embedded systems development and you need a hand, let me know.",
        swiper_kotlin: "Yes, I can also create mobile applications using Kotlin in Android Studio. Although I am new to mobile app development, creating an app of any complexity is one search away, if you know what I mean. I have created calculators, educational testing apps and a music player.",

    },
    ja: {
        nav_projects: "履歴書",
        nav_reversi: "オセロ",
        nav_covid19: "コロナ情報",
        nav_action1: "Action",
        nav_action2: "Action two",
        nav_action3: "Something else here",
        nav_news: "ニュース",
        nav_blogs: "ブロック",
        nav_login: "ロギン",


        login_title: "ユーザー名とパスワードを入力してください。",
        login_username: "ユーザー名",
        login_password: "パスワード",
        login_remember_me: "忘れないで",
        login_forgot_password: "パスワード忘れたか?",
        login_sign_in: "ロギン",
        login_not_member: "まだメンバーじゃない?",
        login_register: "登録",
        login_or_sign_up: "若しくは、以下のアカウントでロギン：",


        data_rotate: ["ソフトウェア　エンジニア", "旅行者", "フロントエンジニア", "バックエンドエンジニア", "言語学習者"],
        intro_p1: "ブハラ郊外で育った私は、子供時代を科学と自然への好奇心に満ちて過ごしてきました。 私は古い電子機器を分解し、それらがどのように機能するかを理解するために熟考していました。",
        intro_p2: "それから、10代の頃、私は英語を学び始めました。それによって、まったく新しい世界観が生まれました。 他の文化について学べば学ぶほど、世界に出て自分の目で確かめたいと思いました。 ここで私は数年後、日本で海外で働いています。 残りは歴史です。",
        intro_see_more: "もっと見る",
        intro_see_less: "小さくする",



        swiper_js: "私はほとんどのプロジェクトでJavaScriptを使用しています。 直接見ることができるのはCovid-19データアナライザー、リバーシゲームであり、あなたが見ているページにはいくつかのJSが関係しています。 Githubプロファイルのソースコードを確認してください。",
        swiper_html5: "HTML5は私のプログラミング入門でした。 これは、言語HTMLの新しいバージョンであり、新しい要素、属性、および動作を備えており、より多様で強力なWebサイトおよびアプリケーションを可能にします。 HTMLでのコーディング方法については、検査ウィンドウを参照してください。",
        swiper_css: "CSSを知らなければ、私は開発者ではありません。 それがすべてのウェブのスタイルです。 プレーンなcssの他に、Sassのようなプリプロセッサ、BootstrapやTailwindCSSのようなCSSを利用したフレームワークもプロジェクトで使用しています。 このページのデザインがどのようになったか知りたいですか？",
        swiper_django: "Djangoは、フルスタック開発に向けた私の最初のステップでした。 これは、データベースとRESTAPIを含む私の個人的なWebサイトとプロジェクトの中核です。 Djangoのモデルアーキテクチャにより、さまざまなデータベースでの作業が簡単になります。 さらに、Djangoを使用すると、すぐに何でもスケールアップできます。",
        swiper_python: "Python-誇大広告の言語ですが、それが私のキャリアを決定することに本当に私を駆り立てたものです。 ニュースアグリゲーター、ウェブスクレイパー、ユーザー認証システム、ウェブサイトを作成し、Pythonでワークフローを自動化しました。 十分な時間があれば、私はほとんど何でもできます-Pythonで何でもできます。",
        swiper_aws: "アマゾンのウェブサービスは本当に私たちの生活の多くを楽にしてくれます。 私は顧客であり、プロジェクトのデプロイ、AWSデータベースの使用、ファイルの保存などをクラウドに行っています。 ビジネスを次のレベルに拡大することを検討している場合は、AWSが最適な方法であり、喜んでお手伝いします。",
        swiper_c: "Cはプログラミング言語の父であると言う人もいます。 私は最初の仕事で最初にそれを扱うようになりました。 コマンドラインゲーム、バイナリファイルアナライザー、バックエンドシステムを作成しました。 超高速です。 組み込みシステムの開発に興味があり、手を必要とする場合は、私に知らせてください。",
        swiper_kotlin: "はい、AndroidStudioでKotlinを使用してモバイルアプリケーションを作成することもできます。 私はモバイルアプリの開発に不慣れですが、私の言いたいことを知っていれば、どんな複雑なアプリでも1回の検索で作成できます。 電卓、教育試験アプリ、音楽プレーヤーを作成しました。",

    }
}


let current_language = localStorage.getItem('currentLanguage')
const selects = document.querySelector("#language_selector")

function grab(id) {
    return document.querySelector(`[data-lang-item='${id}']`)
}

const populate_uz = () => {
    Object.entries(language.uz).forEach(elem => {
        // if (grab(elem[0]) !== null) {
        //     grab(elem[0]).textContent = elem[1]
        //     // console.log(elem)
        // }
        // console.log(elem[0])
        const el = grab(elem[0])
        console.log(el)
        if (el) {
            el.textContent = elem[1]
            // console.log(elem)
        }
    });

}
const populate_ja = () => {
    Object.entries(language.ja).forEach(elem => {
        const el = grab(elem[0])
        // console.log(el)
        if (el) {
            el.textContent = elem[1]
            // console.log(elem)
        }
    });

}
const populate_en = () => {
    Object.entries(language.en).forEach(elem => {
        if (grab(elem[0]) != null) {
            grab(elem[0]).textContent = elem[1]
            // console.log(elem)
        }
    });
}

function language_changer() {
    let value = selects.options[selects.selectedIndex].value
    // console.log("Changed: ", value)
    if (value == "uz") {
        localStorage.setItem('currentLanguage', 'uz')
        populate_uz()
    } else if (value == "ja") {
        localStorage.setItem('currentLanguage', 'ja')
        populate_ja()
    } else {
        localStorage.setItem('currentLanguage', 'en')
        populate_en()
    }
    window.location.reload()
}


window.onload = () => {
    // change the language based on localStorage
    switch (current_language) {
        case 'uz':
            populate_uz()
            selects.value = 'uz'
            break;
        case 'ja':
            selects.value = 'ja'
            selects.options[2].checked = true
            populate_ja()
            break;
        case 'en':
            selects.value = 'en'
            selects.options[0].checked = true
            populate_en()
            break;
        default:
            break;
    }

    // see more effect in mobile view
    const see_more_btn = document.querySelector(".see-more")
    see_more_btn.addEventListener("click", toggle_intro_text)

    // start the text animation
    start_text_rotation()

    // INJECT CSS for rotating text
    var css = document.createElement("style");
    css.type = "text/css";
    css.innerHTML = ".txt-rotate > .wrap { border-right: 0.08em solid #666; }";
    document.body.appendChild(css);


    // add event listener to language selector for a change

    selects.addEventListener('change', () => {
        current_language = localStorage.getItem('currentLanguage')
        language_changer()
    })


    // theme changer dark - light modes
    let darkMode = localStorage.getItem("darkMode")
    // checkbox if checked - night
    const darkModeToggle = document.querySelector("#dark_mode_toggle")

    const enableDarkMode = () => {
        // 1. add dark mode to body
        document.body.classList.add('darkMode')
        //2. update the darkMode in the localStorage 
        localStorage.setItem('darkMode', 'enabled')
    }

    const disableDarkMode = () => {
        // 1. add dark mode to body
        document.body.classList.remove('darkMode')
        //2. update the darkMode in the localStorage 
        localStorage.setItem('darkMode', null)
    }

    // check if the user previously set the darkMode on
    if (darkMode == 'enabled') {
        enableDarkMode()
    }

    darkModeToggle.addEventListener('change', () => {
        darkMode = localStorage.getItem("darkMode")
        if (darkMode !== 'enabled') {
            enableDarkMode()
            console.log(darkMode)
        } else {
            console.log(darkMode)
            disableDarkMode()
        }
    })
}
